### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Å–µ—Ç–µ–π –≤ Docker –∏ Kubernetes**

–°–µ—Ç–∏ –≤ Docker –∏ Kubernetes –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º. –†–∞–∑–±–µ—Ä—ë–º –∫–ª—é—á–µ–≤—ã–µ –º–æ–¥–µ–ª–∏, –¥—Ä–∞–π–≤–µ—Ä—ã –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã.

---

## **1. –°–µ—Ç–∏ –≤ Docker**

### **1.1. –û—Å–Ω–æ–≤–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã —Å–µ—Ç–µ–π**
Docker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ —Å–µ—Ç–µ–π, –∫–∞–∂–¥—ã–π —Ä–µ—à–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏:

| **–î—Ä–∞–π–≤–µ—Ä**       | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                 | **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**                     |
|--------------------|-----------------------------------------------------------------------------|--------------------------------------------|
| **Bridge** (default) | –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç IP –∏–∑ –ø–æ–¥—Å–µ—Ç–∏ Docker (`172.17.0.0/16`). | –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. |
| **Host**           | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞ (–Ω–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏). –ü–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ = –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞. | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. |
| **Overlay**        | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ Docker-—Ö–æ—Å—Ç–æ–≤ –≤ –µ–¥–∏–Ω—É—é —Å–µ—Ç—å (–¥–ª—è Swarm/Kubernetes). | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. |
| **Macvlan**        | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π MAC-–∞–¥—Ä–µ—Å, –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–∞—Å—Ç—å—é —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π —Å–µ—Ç–∏. | –ö–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "–∫–∞–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä". |
| **None**           | –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Å–µ—Ç–∏ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ —Å–µ—Ç–∏).                                  | –î–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π IPC). |

---

### **1.2. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ç—è–º–∏ –≤ Docker**
#### **–°–æ–∑–¥–∞–Ω–∏–µ bridge-—Å–µ—Ç–∏**
```bash
docker network create my-bridge-network
docker run -d --name nginx --network my-bridge-network nginx
```

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–π**
```bash
docker network ls
docker inspect nginx | grep IPAddress
```

#### **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫ –¥–≤—É–º —Å–µ—Ç—è–º**
```bash
docker network create backend
docker run -d --name app --network my-bridge-network --network backend my-app
```

---

### **1.3. –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤**
–ß—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –ø–æ—Ä—Ç–æ–º —Ö–æ—Å—Ç–∞:
```bash
docker run -d -p 8080:80 nginx  # –•–æ—Å—Ç:8080 ‚Üí –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:80
```

---

## **2. –°–µ—Ç–∏ –≤ Kubernetes (k8s)**

Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é –º–æ–¥–µ–ª—å —Å–µ—Ç–µ–π, –≥–¥–µ:
- **–ö–∞–∂–¥—ã–π –ø–æ–¥ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π IP** (–∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞).
- **–ü–æ–¥—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –±–µ–∑ NAT** (–¥–∞–∂–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–æ–¥–∞—Ö).
- **–°–µ—Ä–≤–∏—Å—ã (Services)** –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –¥–ª—è –ø–æ–¥–æ–≤.

---

### **2.1. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏**
#### **a) Pod Network**
- –ö–∞–∂–¥—ã–π –ø–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç IP –∏–∑ –æ–±—â–µ–π —Å–µ—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `10.244.0.0/16`).
- –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **CNI-–ø–ª–∞–≥–∏–Ω—ã** (Calico, Flannel, Cilium, WeaveNet).

#### **b) Service Network**
- **–°–µ—Ä–≤–∏—Å** ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ –≥—Ä—É–ø–ø–æ–π –ø–æ–¥–æ–≤.
- –¢–∏–ø—ã —Å–µ—Ä–≤–∏—Å–æ–≤:
  - **ClusterIP** (–¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞).
  - **NodePort** (–ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –Ω–∞ –≤—Å–µ –Ω–æ–¥—ã).
  - **LoadBalancer** (–≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –≤ –æ–±–ª–∞–∫–µ).
  - **ExternalName** (CNAME-–∑–∞–ø–∏—Å—å –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞).

#### **c) Ingress**
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è HTTP/HTTPS —Ç—Ä–∞—Ñ–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `example.com ‚Üí —Å–µ—Ä–≤–∏—Å`).
- –†–∞–±–æ—Ç–∞–µ—Ç —Å **Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏** (Nginx, Traefik, Istio).

---

### **2.2. –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ç—è–º–∏ –≤ k8s**
#### **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∞ –∏ —Å–µ—Ä–≤–∏—Å–∞**
```yaml
# pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: nginx
    image: nginx
    ports:
    - containerPort: 80
---
# service.yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: ClusterIP
```

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏**
```bash
kubectl get pods -o wide      # –£–∑–Ω–∞—Ç—å IP –ø–æ–¥–∞
kubectl get svc              # –£–∑–Ω–∞—Ç—å ClusterIP —Å–µ—Ä–≤–∏—Å–∞
kubectl exec -it nginx -- curl http://nginx-service  # –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å—É –∏–∑ –ø–æ–¥–∞
```

---

### **2.3. CNI-–ø–ª–∞–≥–∏–Ω—ã (Container Network Interface)**
–ü–ª–∞–≥–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Å–µ—Ç—å –¥–ª—è –ø–æ–¥–æ–≤. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ:
- **Calico** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (NetworkPolicies).
- **Flannel** ‚Äî –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç overlay-—Å–µ—Ç—å.
- **Cilium** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ eBPF, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç L7-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é.

#### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Calico**
```bash
kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml
```

---

### **2.4. Network Policies**
–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Å–µ–º, –∫—Ä–æ–º–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –¥–æ—Å—Ç—É–ø –∫ –ë–î").
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: db-policy
spec:
  podSelector:
    matchLabels:
      app: database
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 5432
```

---

## **3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Docker –∏ Kubernetes —Å–µ—Ç–µ–π**
| **–ê—Å–ø–µ–∫—Ç**         | **Docker**                          | **Kubernetes**                     |
|---------------------|-------------------------------------|------------------------------------|
| **–ë–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä                          | Pod (1+ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)                |
| **–°–µ—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** | `bridge`                          | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç CNI (Calico/Flannel)   |
| **Service Discovery** | Docker DNS (–ø–æ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) | kube-dns/CoreDNS (–ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞) |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**  | –†—É—á–Ω–æ–µ (–¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ ‚Äî Swarm)     | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ k8s)   |
| **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞**    | –ß–µ—Ä–µ–∑ `-p` (–ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤)       | Service (ClusterIP/LoadBalancer)  |

---

## **4. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
### **Docker**
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω–∏ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ (`docker network inspect`).
- **–ü–æ—Ä—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `-p` –∏ —Ñ–∞–µ—Ä–≤–æ–ª (`iptables -L`).

### **Kubernetes**
- **–ü–æ–¥ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç IP** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CNI-–ø–ª–∞–≥–∏–Ω (`kubectl get pods -n kube-system`).
- **–°–µ—Ä–≤–∏—Å –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `selector` –≤ —Å–µ—Ä–≤–∏—Å–µ –∏ –ª–µ–π–±–ª—ã –ø–æ–¥–∞ (`kubectl describe svc`).
- **Ingress –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (`kubectl get ingress`).

---

## **5. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**
### **Docker**
```bash
docker network ls
docker inspect <container> | grep IPAddress
docker logs <container>
```

### **Kubernetes**
```bash
kubectl get pods -o wide
kubectl describe pod <pod>
kubectl logs <pod>
kubectl get svc
kubectl get networkpolicies
```

---

## **–í—ã–≤–æ–¥**
- **Docker** –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ —Å–µ—Ç–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è (bridge, host).
- **Kubernetes** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –º–æ–¥–µ–ª–∏ (CNI, Services, Ingress) –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.
- **–û–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ**: –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã/–ø–æ–¥—ã –Ω–µ –æ–±—â–∞—é—Ç—Å—è ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
  1. –°–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏.
  2. DNS (—Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º—ë–Ω?).
  3. Firewall/iptables.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π! üöÄ